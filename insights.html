<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detailed Insights - SurvAI</title>
  <link rel="stylesheet" href="styles.css">
  
</head>
<body>
  <div class="dashboard-menu-bar">
    <a href="dashboard.html" class="menu-button">Back</a>
    <div class="menu-title">Detailed Insights</div>
    <a href="login.html" class="menu-button">Logout</a>
  </div>
  <div class="insights-container" style="display: flex; margin: 20px; align-items: flex-start; height: calc(100vh - 120px);">
    <div class="sidebar" style="width: 250px; display: flex; flex-direction: column; margin-right: 40px; margin-top: 100px;">
      <button onclick="showRecentResponses()" style="background-color: #ff4d4d; color: white; border: none; padding: 15px; margin-bottom: 20px; border-radius: 5px; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: background-color 0.3s ease;">Recent Responses</button>
      <button id="summarized-responses-button" style="background-color: #ff4d4d; color: white; border: none; padding: 15px; margin-bottom: 20px; border-radius: 5px; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: background-color 0.3s ease;">Summarized Responses</button>
      <button onclick="showTracking()" style="background-color: #ff4d4d; color: white; border: none; padding: 15px; margin-bottom: 20px; border-radius: 5px; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: background-color 0.3s ease;">Tracking</button>
      <button onclick="showLoading()" style="background-color: #ff4d4d; color: white; border: none; padding: 15px; margin-bottom: 20px; border-radius: 5px; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: background-color 0.3s ease;">Create a Report</button>
      <button onclick="showPotentialSpam()" style="background-color: #ff4d4d; color: white; border: none; padding: 15px; margin-bottom: 20px; border-radius: 5px; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: background-color 0.3s ease;">Potential Spam</button>
    </div>
    <div class="content" style="flex-grow: 1; margin-top: 20px;">
      <h1>Detailed Insights</h1>
      <p>Here you can view more in-depth statistics and reports on your customer feedback and business performance.</p>
      <div id="loading-animation" style="display:none; margin:20px 0; text-align:center;">
        <span style="font-size:1.5rem;">Loading...</span>
        <!-- Optionally, add your spinner animation here -->
      </div>
      <div id="recent-responses-window" style="display: none; padding: 20px; margin: 20px 0; border: 1px solid #ccc; border-radius: 5px; background-color: #fff;">
        <h2 style="color: #ff4d4d; margin-bottom: 10px; font-family: Arial, sans-serif;">Recent Responses</h2>
        <div id="unsorted-responses">
          <div class="response" data-rating="8" style="margin-bottom: 15px;">
            <strong>John Doe</strong> (john@example.com) • Rating: 8<br>
            "I really enjoyed the product and found it very useful. The packaging was excellent. Customer service was friendly and prompt. The features met my expectations. I appreciated the detailed instructions provided. Delivery was on time as promised. I would definitely recommend this product."<br>
            <em>Source: Email</em><br>
            <button style="background-color: #28a745; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px; font-weight: bold; cursor: pointer;">Respond</button>
          </div>
          <div class="response" data-rating="9" style="margin-bottom: 15px;">
            <strong>Jane Smith</strong> (jane.smith@example.com) • Rating: 9<br>
            "The product quality exceeded my expectations. Every detail was carefully considered. I found the design very appealing. The usability is top-notch. It integrates well with my current setup. The performance is consistently reliable. I am very pleased with my purchase."<br>
            <em>Source: LinkedIn</em><br>
            <button style="background-color: #28a745; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px; font-weight: bold; cursor: pointer;">Respond</button>
          </div>
          <div class="response" data-rating="7" style="margin-bottom: 15px;">
            <strong>Michael Lee</strong> (michael.lee@example.com) • Rating: 7<br>
            "The service was generally good and met most of my needs. The interface is clear and intuitive. Several minor issues were resolved quickly. I found the troubleshooting guide very helpful. The color scheme is pleasant and modern. Customer support was responsive. Overall, a satisfactory experience."<br>
            <em>Source: Instagram</em><br>
            <button style="background-color: #28a745; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px; font-weight: bold; cursor: pointer;">Respond</button>
          </div>
          <div class="response" data-rating="10" style="margin-bottom: 15px;">
            <strong>Emily Davis</strong> (emily.davis@example.com) • Rating: 10<br>
            "Absolutely exceptional product quality. The design is innovative and robust. Everything functions flawlessly. I appreciated the consistent updates. The customer experience was outstanding. The value for money is superb. I will spread the word to my friends."<br>
            <em>Source: Email</em><br>
            <button style="background-color: #28a745; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px; font-weight: bold; cursor: pointer;">Respond</button>
          </div>
          <div class="response" data-rating="6" style="margin-bottom: 15px;">
            <strong>David Brown</strong> (david.brown@example.com) • Rating: 6<br>
            "The product arrived on time but had some usability issues. The instructions were a bit confusing. I encountered minor glitches during use. The response from customer support was acceptable. Design felt innovative though not fully polished. Some features are great but others need improvement. I see potential if the updates continue."<br>
            <em>Source: SMS</em><br>
            <button style="background-color: #28a745; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px; font-weight: bold; cursor: pointer;">Respond</button>
          </div>
          <div class="response" data-rating="9" style="margin-bottom: 15px;">
            <strong>Sophia Wilson</strong> (sophia.wilson@example.com) • Rating: 9<br>
            "A very satisfying purchase overall. The item’s build quality impressed me. The performance is robust enough to exceed demands. I loved the sleek and modern aesthetics. Installation was remarkably simple. The product maintained consistency in every usage. I would positively recommend it to peers."<br>
            <em>Source: LinkedIn</em><br>
            <button style="background-color: #28a745; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px; font-weight: bold; cursor: pointer;">Respond</button>
          </div>
          <div class="response" data-rating="8" style="margin-bottom: 15px;">
            <strong>Oliver Martinez</strong> (oliver.martinez@example.com) • Rating: 8<br>
            "I was impressed with the innovative features offered. The durability of the product stands out. The user manual was concise yet comprehensive. Support materials helped me fully utilize it. The software integration was seamless. I felt that the design modernizes everyday tasks. Overall, a solid and reliable solution."<br>
            <em>Source: Instagram</em><br>
            <button style="background-color: #28a745; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px; font-weight: bold; cursor: pointer;">Respond</button>
          </div>
          <div class="response" data-rating="7" style="margin-bottom: 15px;">
            <strong>Ava Garcia</strong> (ava.garcia@example.com) • Rating: 7<br>
            "The product meets the basic expectations with a few exceptions. The design is elegant and minimalistic. I encountered slight delays in performance. The customer care team was supportive. Each feature was thoughtfully implemented. I enjoyed the overall interactive design. Some minor tweaks could make it perfect."<br>
            <em>Source: SMS</em><br>
            <button style="background-color: #28a745; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px; font-weight: bold; cursor: pointer;">Respond</button>
          </div>
          <div class="response" data-rating="8" style="margin-bottom: 15px;">
            <strong>Liam Johnson</strong> (liam.johnson@example.com) • Rating: 8<br>
            "An engaging product that stands out from the competition. The craftsmanship is superb and attention is paid to detail. I found every function well-executed. The interactive features enhanced my experience. Customer support responded with expertise. The overall design is user-friendly and inviting. I am satisfied with the purchase and look forward to updates."<br>
            <em>Source: Email</em><br>
            <button style="background-color: #28a745; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px; font-weight: bold; cursor: pointer;">Respond</button>
          </div>
          <div class="response" data-rating="9" style="margin-bottom: 15px;">
            <strong>Isabella Rodriguez</strong> (isabella.rodriguez@example.com) • Rating: 9<br>
            "This is one of the best products I have used recently. The intuitive design made it really simple to navigate. Quality and performance were both excellent. I enjoyed the practical and innovative features. The customer touchpoints were very responsive. The after-sales support cemented my trust in the brand. I am excited to see what improvements come next."<br>
            <em>Source: LinkedIn</em><br>
            <button style="background-color: #28a745; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px; font-weight: bold; cursor: pointer;">Respond</button>
          </div>
        </div>
        <div class="sorted-responses" style="display: flex; gap: 20px; margin-top: 20px;">
          <div id="satisfactory" style="flex: 1; border: 1px solid #ccc; border-radius: 5px; padding: 10px;">
            <h3 style="color: #ff4d4d;">Satisfactory Responses</h3>
          </div>
          <div id="unsatisfactory" style="flex: 1; border: 1px solid #ccc; border-radius: 5px; padding: 10px;">
            <h3 style="color: #ff4d4d;">Unsatisfactory Responses</h3>
          </div>
        </div>
      </div>
      <div id="summarized-responses-window" style="display: none; padding: 20px; margin: 20px 0; border: 1px solid #ccc; border-radius: 5px; background-color: #fff;">
        <h2 style="color: #ff4d4d; margin-bottom: 10px; font-family: Arial, sans-serif;">Summarized Responses</h2>
        <div style="display: flex; gap: 20px;">
          <div style="flex: 1;">
            <h3 style="color: #ff4d4d;">What People Love</h3>
            <p id="love-summary"></p>
          </div>
          <div style="flex: 1;">
            <h3 style="color: #ff4d4d;">What Needs Improvement</h3>
            <p id="improvement-summary"></p>
          </div>
        </div>
      </div>
      <div id="tracking-window" style="display: none; padding: 20px; margin: 20px 0; border: 1px solid #ccc; border-radius: 5px; background-color: #fff; text-align: left;">
        <div style="display: flex; gap: 20px;">
          <div style="flex: 1;">
            <h2 style="color: #ff4d4d; margin-bottom: 10px; font-family: Arial, sans-serif;">Survey Traffic</h2>
            <div style="margin-bottom: 15px;">
              <strong>Social Media</strong><br>
              Responses Recorded: 150<br>
              Visitors to Survey Site: 300<br>
              Avg. Response Length: 20 words<br>
              Avg. Score: 8
            </div>
            <div style="margin-bottom: 15px;">
              <strong>Email Campaign</strong><br>
              Responses Recorded: 120<br>
              Visitors to Survey Site: 250<br>
              Avg. Response Length: 25 words<br>
              Avg. Score: 9
            </div>
            <div style="margin-bottom: 15px;">
              <strong>SMS Outreach</strong><br>
              Responses Recorded: 80<br>
              Visitors to Survey Site: 200<br>
              Avg. Response Length: 15 words<br>
              Avg. Score: 7
            </div>
            <div style="margin-bottom: 15px;">
              <strong>Website Embedded</strong><br>
              Responses Recorded: 200<br>
              Visitors to Survey Site: 400<br>
              Avg. Response Length: 30 words<br>
              Avg. Score: 8
            </div>
          </div>
          <div style="flex: 1;">
            <h2 style="color: #ff4d4d; margin-bottom: 10px; font-family: Arial, sans-serif;">Active Campaigns</h2>
            <div style="margin-bottom: 15px;">
              <strong>Instagram Campaign</strong><br>
              Start Date: 2025-06-01<br>
              End Date: 2025-06-30
            </div>
            <div style="margin-bottom: 15px;">
              <strong>Initial Product Launch: All Channels </strong><br>
              Start Date: 2025-09-15<br>
              End Date: 2025-10-15
            </div>
            <div style="margin-bottom: 15px;">
              <strong>Yearly Email Recap</strong><br>
              Start Date: 2025-12-01<br>
              End Date: 2026-12-31
            </div>
            <div style="margin-top: 20px;">
              <canvas id="surveyBarChart"></canvas>
            </div>
          </div>
        </div>
      </div>
      <div id="potential-spam-window" style="display: none; padding: 20px; margin: 20px 0; border: 1px solid #ccc; border-radius: 5px; background-color: #fff; text-align: left;">
        <h2 style="color: #ff4d4d; margin-bottom: 10px; font-family: Arial, sans-serif;">Potential Spam Feedback</h2>
        <div class="spam-example" style="margin-bottom: 15px; border-bottom: 1px solid #ddd; padding-bottom: 10px;">
          <strong>Name:</strong> Spammer One<br>
          <strong>Email:</strong> spam1@example.com<br>
          <strong>Reason:</strong> Gibberish text<br>
          <strong>Feedback:</strong> Rating: 2, "blah blah"<br>
          <strong>Date:</strong> 2025-01-15<br>
          <button class="action-button" style="background-color: red; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px;" onclick="toggleActionOptions(this)">Take Action</button>
          <div class="action-options" style="display: none; margin-top: 5px;">
            <button style="background-color: grey; color: white; border: none; padding: 5px 10px; margin-right: 5px; border-radius: 5px;">Block User</button>
            <button style="background-color: grey; color: white; border: none; padding: 5px 10px; border-radius: 5px;">Respond</button>
          </div>
        </div>
        <div class="spam-example" style="margin-bottom: 15px; border-bottom: 1px solid #ddd; padding-bottom: 10px;">
          <strong>Name:</strong> Quick Rewards<br>
          <strong>Email:</strong> rewards@example.com<br>
          <strong>Reason:</strong> Multiple surveys quickly<br>
          <strong>Feedback:</strong> Rating: 1, "ok ok"<br>
          <strong>Date:</strong> 2025-02-20<br>
          <button class="action-button" style="background-color: red; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px;" onclick="toggleActionOptions(this)">Take Action</button>
          <div class="action-options" style="display: none; margin-top: 5px;">
            <button style="background-color: grey; color: white; border: none; padding: 5px 10px; margin-right: 5px; border-radius: 5px;">Block User</button>
            <button style="background-color: grey; color: white; border: none; padding: 5px 10px; border-radius: 5px;">Respond</button>
          </div>
        </div>
        <div class="spam-example" style="margin-bottom: 15px; border-bottom: 1px solid #ddd; padding-bottom: 10px;">
          <strong>Name:</strong> Random Guy<br>
          <strong>Email:</strong> random@example.com<br>
          <strong>Reason:</strong> 1-2 word responses<br>
          <strong>Feedback:</strong> Rating: 3, "yes"<br>
          <strong>Date:</strong> 2025-03-25<br>
          <button class="action-button" style="background-color: red; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px;" onclick="toggleActionOptions(this)">Take Action</button>
          <div class="action-options" style="display: none; margin-top: 5px;">
            <button style="background-color: grey; color: white; border: none; padding: 5px 10px; margin-right: 5px; border-radius: 5px;">Block User</button>
            <button style="background-color: grey; color: white; border: none; padding: 5px 10px; border-radius: 5px;">Respond</button>
          </div>
        </div>
        <div class="spam-example" style="margin-bottom: 15px; border-bottom: 1px solid #ddd; padding-bottom: 10px;">
          <strong>Name:</strong> Bot Tester<br>
          <strong>Email:</strong> bot@test.com<br>
          <strong>Reason:</strong> Random gibberish<br>
          <strong>Feedback:</strong> Rating: 1, "zzz"<br>
          <strong>Date:</strong> 2025-04-30<br>
          <button class="action-button" style="background-color: red; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px;" onclick="toggleActionOptions(this)">Take Action</button>
          <div class="action-options" style="display: none; margin-top: 5px;">
            <button style="background-color: grey; color: white; border: none; padding: 5px 10px; margin-right: 5px; border-radius: 5px;">Block User</button>
            <button style="background-color: grey; color: white; border: none; padding: 5px 10px; border-radius: 5px;">Respond</button>
          </div>
        </div>
        <div class="spam-example" style="margin-bottom: 15px;">
          <strong>Name:</strong> Scam Alert<br>
          <strong>Email:</strong> scam@example.com<br>
          <strong>Reason:</strong> Multiple rewards abuse<br>
          <strong>Feedback:</strong> Rating: 2, "hey"<br>
          <strong>Date:</strong> 2025-05-10<br>
          <button class="action-button" style="background-color: red; color: white; border: none; padding: 5px 10px; margin-top: 5px; border-radius: 5px;" onclick="toggleActionOptions(this)">Take Action</button>
          <div class="action-options" style="display: none; margin-top: 5px;">
            <button style="background-color: grey; color: white; border: none; padding: 5px 10px; margin-right: 5px; border-radius: 5px;">Block User</button>
            <button style="background-color: grey; color: white; border: none; padding: 5px 10px; border-radius: 5px;">Respond</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="sortResponses.js"></script>
  <script src="summarizeResponses.js"></script>
  <script>
    function showRecentResponses() {
      document.getElementById('recent-responses-window').style.display = 'block';
      document.getElementById('tracking-window').style.display = 'none';
      document.getElementById('summarized-responses-window').style.display = 'none';
      document.getElementById('potential-spam-window').style.display = 'none';
      document.getElementById('loading-animation').style.display = 'none';
    }
    function showTracking() {
      document.getElementById('tracking-window').style.display = 'block';
      document.getElementById('recent-responses-window').style.display = 'none';
      document.getElementById('summarized-responses-window').style.display = 'none';
      document.getElementById('potential-spam-window').style.display = 'none';
      document.getElementById('loading-animation').style.display = 'none';
    }
    function showPotentialSpam() {
      document.getElementById('potential-spam-window').style.display = 'block';
      document.getElementById('recent-responses-window').style.display = 'none';
      document.getElementById('tracking-window').style.display = 'none';
      document.getElementById('summarized-responses-window').style.display = 'none';
      document.getElementById('loading-animation').style.display = 'none';
    }
    function showLoading() {
      // Hide all panes and display the loading animation
      document.getElementById('recent-responses-window').style.display = 'none';
      document.getElementById('tracking-window').style.display = 'none';
      document.getElementById('summarized-responses-window').style.display = 'none';
      document.getElementById('potential-spam-window').style.display = 'none';
      document.getElementById('loading-animation').style.display = 'block';
      
      // Hard-coded sample data generated on client
      const loveSummary = 'Customers love the intuitive design and smooth user experience.';
      const improvementSummary = 'Some improvements are needed in page load times and responsiveness.';
      const trackingData = [
        'Social Media: Responses Recorded: 150 | Visitors: 300 | Avg. Score: 8',
        'Email Campaign: Responses Recorded: 120 | Visitors: 250 | Avg. Score: 9',
        'SMS Outreach: Responses Recorded: 80 | Visitors: 200 | Avg. Score: 7',
        'Website Embedded: Responses Recorded: 200 | Visitors: 400 | Avg. Score: 8'
      ];
      
      // Build text file content
      const content = 
        'Summarized Responses\n' +
        '---------------------\n' +
        'What People Love:\n' + loveSummary + '\n\n' +
        'What Needs Improvement:\n' + improvementSummary + '\n\n' +
        'Tracking Metrics\n' +
        '----------------\n' + trackingData.join('\n');
      
      // Create text file and trigger download without contacting a server
      const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'report.txt';
      document.body.appendChild(a);
      a.click();
      a.remove();
      window.URL.revokeObjectURL(url);
      document.getElementById('loading-animation').style.display = 'none';
    }
    function toggleActionOptions(button) {
      const options = button.nextElementSibling;
      options.style.display = (options.style.display === 'none' || options.style.display === '') ? 'block' : 'none';
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    fetch('surveyTrafficData.csv')
      .then(response => response.text())
      .then(csvText => {
        const rows = csvText.trim().split('\n');
        const labels = [];
        const dataPoints = [];
        rows.slice(1).forEach(row => {
          const cols = row.split(',');
          labels.push(cols[0]);
          dataPoints.push(parseInt(cols[1], 10));
        });
        const ctx = document.getElementById('surveyBarChart').getContext('2d');
        new Chart(ctx, {
          type: 'bar',
          data: {
            labels: labels,
            datasets: [{
              label: 'Responses Recorded',
              data: dataPoints,
              backgroundColor: ['#ff6384', '#36a2eb', '#cc65fe', '#ffce56']
            }]
          },
          options: {}
        });
      });
  </script>
</body>
</html>
